<h1>This is the cart page</h1>
<!-- Info needed for the shipping -->
<section>
  <h3>Shipping Address</h3>
  <% if @user.name %>
    <p><%= @user.name %></p>
    <p><%= @user.shipping_address %></p>
    <p><%= @user.phone_number %></p>
    <button>Change</button>
    <%= simple_form_for(@user, remote: true, method: :patch) do |f| %>
      <div id="name">
        <%= f.input :name, label: 'Full name', required: true %>
      </div>
      <div id="shipping_address">
        <%= f.input :shipping_address,required: true %>
      </div>
      <div id="phone">
        <%= f.input :phone_number, required: true %>
      </div>
      <%= f.submit 'Change shipping information' %>
    <% end %>
    <h3>Billing Address</h3>
    <% if @user.shipping_address == @order.billing_address %>
      <p>Same as shipping address</p>
    <% else %>
      <p><%= @order.billing_address %></p>
    <% end %>
    <button>Change</button>
    <%= simple_form_for(@order, remote: true, method: :patch) do |f| %>
      <%= f.input :billing_address, required: true %>
      <%= f.submit 'Change billing information' %>
    <% end %>
  <% else %>
    <%= simple_form_for(@user, remote: true, method: :patch) do |f| %>
      <div id="name">
        <%= f.input :name, label: 'Full name', required: true %>
      </div>
      <div id="shipping_address">
        <%= f.input :shipping_address,required: true %>
      </div>
      <div id="phone">
        <%= f.input :phone_number, required: true %>
      </div>
      <%= f.submit 'Add shipping information' %>
    <% end %>
  <% end %>
</section>
<!-- Payment logic -->
<%= render "charges/shared/payment_stripe", cart_items: @cart_items, order: @order, amount: @amount, description: @description %>
